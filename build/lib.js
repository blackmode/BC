function createSphereGeometry(a,b,c,d){for(var e=[],f=[],g=[],h=[],i=[],j=[],l=(Math.PI,function(a){return Math.sin(a)}),m=function(a){return Math.cos(a)},B=Math.PI/a,C=2*Math.PI/b,D=0;D<=a;++D)for(var E=D*B,F=0;F<=b;++F){var G=F*C,H=l(E)*m(G)*c,I=l(G)*l(E)*c,J=m(E)*c,K=l(E)*c,L=H/c,M=I/c,N=J/c;u=1-F/b,v=D/a,j.push(K),i.push(K/c),e.push(H),e.push(I),e.push(J),g.push(L),g.push(M),g.push(N),f.push(u),f.push(v)}for(var D=0;D<a;D++)for(var F=0;F<b;F++){var O=D*(b+1)+F,P=O+b+1,Q=O,R=O+1,S=P+1,T=P;h.push(Q,R,S),h.push(Q,T,S)}if(d){f.itemSize=2,g.itemSize=3,e.itemSize=3;var U={textures:{itemSize:2,arrayName:f},indices:{arrayName:h},normals:{itemSize:3,arrayName:g},position:{itemSize:3,arrayName:e}},V={},W=U;for(var X in W){for(var Y=W[X],Z=Y.arrayName,$=Y.itemSize,_=h.length,aa=initArray(_*$),ba=0,ca=0,da=0;da<_;da++){ba=h[da]*$;for(var ea=0;ea<$;ea++)aa[ca++]=Z[ba++]}V[X]={arrayName:aa,itemSize:$}}f=V.textures.arrayName,e=V.position.arrayName,g=V.normals.arrayName;for(var da=0,fa=g.length/3;da<fa;da++){var H=g[3*da+0],J=g[3*da+1],I=g[3*da+2],ga=Math.sqrt(H*H+J*J);da<fa/2?(correction=0==H&&0==J?1:Math.acos(I)/ga,"false"==getParamByKey("correction")&&(correction=1),H*=correction,J*=correction,f[2*da+0]=H*(270.6/1920)+475.8/1920,f[2*da+1]=J*(270.6/1080)+480.04/1080):(correction=0==H&&0==J?1:Math.acos(-I)/ga,"false"==getParamByKey("correction")&&(correction=1),H*=correction,J*=correction,f[2*da+0]=.140702916875*-H+.750625,f[2*da+1]=J*(266.2343888/1080)+480.296/1080)}}return{vertices:new Float32Array(e),textures:new Float32Array(f),normals:new Float32Array(g),hypotenuse:new Float32Array(j),hypotenuse_normal:new Float32Array(i),indices:new Uint16Array(h),noIndices:d}}function createCubeGeometry(){var a=[],b=[],c=[],d=[],a=[-1,1,1,1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,1,1,1,-1,1,-1,-1,1,-1,1],b=[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],c=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],d=[];return{vertices:new Float32Array(a),textures:new Float32Array(b),normals:new Float32Array(c),indices:new Uint16Array(d)}}function create2DGeometry(){var a=[],b=[],c=[],d=[],a=[-1,-1,1,-1,1,1,-1,1],b=[0,0,1,0,1,1,0,1],c=[],d=[0,1,2,0,2,3];return{vertices:new Float32Array(a),textures:new Float32Array(b),normals:new Float32Array(c),indices:new Uint16Array(d)}}function fishEye(a,b,c,d,e){var f=1/d;if(a>c)var h=(a-c)*f;else if(a<c)var h=(c-a)*f;else console.warn("Hodnoty se nemohou rovnat");return{r:h,d:2*h,o:2*Math.PI*h,s:Math.PI*h*h}}function degToRad(a){return parseFloat(a*(Math.PI/180))}function radToDeg(a){return parseFloat(a*(180/Math.PI))}function polarToCartesian(a,b,c,d){var e=180,f=degToRad(d-e);return{x:a+c*Math.cos(f),y:b+c*Math.sin(f)}}function getParamByKey(a){var b=window.location.href,c=[];b=b.substring(b.indexOf("?")+1).split("&");for(var d=0;d<b.length;d++)if(c=b[d].split("="),a==c[0])return c[1];return!1}function d(a){console.log("------------------- DEBUG STARTS-------------------"),console.log(a),console.log("___________________ DEBUG ENDS ____________________")}function w(a){console.log("------------------- WARN STARTS-------------------"),console.warn(a),console.log("___________________ WARN ENDS ____________________")}function e(a){console.log("------------------- ERROR STARTS-------------------"),console.error(a),console.log("___________________ ERROR ENDS ____________________")}function log(a){console.log(a)}function checkIfFileExists(a){var b=new XMLHttpRequest,c=new Image;return b.open("HEAD",a,!1),b.send(),c.src=a,404!=b.status||0!=c.height}function isFileExists(a){var b=new XMLHttpRequest;return b.open("HEAD",a,!1),b.send(),404!=b.status}function videoReady(a){return a.readyState>=a.HAVE_CURRENT_DATA}function logger(a){var b=document.getElementById("logger");if(!b){var b=document.createElement("div");b.setAttribute("id","logger"),b.style.width="300px",b.style.height="500px",b.style.position="absolute",b.style.overflow="scroll",b.style.top="0px";var c=document.getElementById("body");c?c.append(b):console.warn("Neexistuje TAG <BODY> s ID body, nutne pro logger!")}b.innerHTML+='<span style="color: #2f0; font-size:12px"><span style="color: white">LOG:</span> '+a+"</span><br />"}function initArray(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function createVideo(a){if(!isFileExists(a))return w("Zdrojove video neexistuje"),!1;var b=document.createElement("video");return b.loop=!1,b.muted=!1,b.autoplay=!1,b.preload="auto",b.src=a,b.setAttribute("webkit-playsinline","webkit-playsinline"),b}function imgLoaded(a){return!(!a.complete||0==a.naturalWidth)}function createImage(a){if(!checkIfFileExists(a))return w("Zdrojovy obrazek neexistuje"),!1;var b=new Image;return b.src=a,b.crossOrigin="anonymous",b}function getCurrentProgramFilename(){var a=window.location.pathname,b=a.split("/").pop();if(!b){if(isFileExists("index.html"))return"index.html";if(isFileExists("index.htm"))return"index.htm";if(isFileExists("default.htm"))return"default.htm";if(isFileExists("default.html"))return"default.html"}return b}function createIdentityMatrix3(){return[1,0,0,0,1,0,0,0,1]}function createIdentityMatrix4(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function createPerspectiveMatrix(a,b,c,d){var e=1/Math.tan(a/2);return[e/b,0,0,0,0,e,0,0,0,0,(c+d)/(c-d),-1,0,0,c*d*2/(c-d),0]}function rotateX(a,b){var c=Math.cos(b),d=Math.sin(b),e=-1,f=a[1],g=a[5],h=a[9];return a[1]=a[1]*c+a[2]*d*e,a[5]=a[5]*c+a[6]*d*e,a[9]=a[9]*c+a[10]*d*e,a[2]=a[2]*c-f*d*e,a[6]=a[6]*c-g*d*e,a[10]=a[10]*c-h*d*e,a.constructor===Float32Array?a:new Float32Array(a)}function rotateY(a,b){var c=Math.cos(b),d=Math.sin(b),e=1,f=a[0],g=a[4],h=a[8];return a[0]=c*a[0]-d*a[2]*e,a[4]=c*a[4]-d*a[6]*e,a[8]=c*a[8]-d*a[10]*e,a[2]=c*a[2]+d*f*e,a[6]=c*a[6]+d*g*e,a[10]=c*a[10]+d*h*e,a.constructor===Float32Array?a:new Float32Array(a)}function rotateZ(a,b){var c=1,d=Math.cos(b),e=Math.sin(b),f=a[0],g=a[4],h=a[8];return a[0]=d*a[0]+e*a[1]*c,a[4]=d*a[4]+e*a[5]*c,a[8]=d*a[8]+e*a[9]*c,a[1]=d*a[1]-e*f*c,a[5]=d*a[5]-e*g*c,a[9]=d*a[9]-e*h*c,a.constructor===Float32Array?a:new Float32Array(a)}function multiply(a,b,c){var d=b,e=c;return a[0]=d[0]*e[0]+d[1]*e[4]+d[2]*e[8]+d[3]*e[12],a[1]=d[0]*e[1]+d[1]*e[5]+d[2]*e[9]+d[3]*e[13],a[2]=d[0]*e[2]+d[1]*e[6]+d[2]*e[10]+d[3]*e[14],a[3]=d[0]*e[3]+d[1]*e[7]+d[2]*e[11]+d[3]*e[15],a[4]=d[4]*e[0]+d[5]*e[4]+d[6]*e[8]+d[7]*e[12],a[5]=d[4]*e[1]+d[5]*e[5]+d[6]*e[9]+d[7]*e[13],a[6]=d[4]*e[2]+d[5]*e[6]+d[6]*e[10]+d[7]*e[14],a[7]=d[4]*e[3]+d[5]*e[7]+d[6]*e[11]+d[7]*e[15],a[8]=d[8]*e[0]+d[9]*e[4]+d[10]*e[8]+d[11]*e[12],a[9]=d[8]*e[1]+d[9]*e[5]+d[10]*e[9]+d[11]*e[13],a[10]=d[8]*e[2]+d[9]*e[6]+d[10]*e[10]+d[11]*e[14],a[11]=d[8]*e[3]+d[9]*e[7]+d[10]*e[11]+d[11]*e[15],a[12]=d[12]*e[0]+d[13]*e[4]+d[14]*e[8]+d[15]*e[12],a[13]=d[12]*e[1]+d[13]*e[5]+d[14]*e[9]+d[15]*e[13],a[14]=d[12]*e[2]+d[13]*e[6]+d[14]*e[10]+d[15]*e[14],a[15]=d[12]*e[3]+d[13]*e[7]+d[14]*e[11]+d[15]*e[15],a.constructor===Float32Array?a:new Float32Array(a)}function scaleMatrix(a,b,c){return[a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1]}function translateMatrix(a,b,c){return[1,0,0,0,0,1,0,0,0,0,1,0,a,b,c,1]}function scale(a,b,c,d){return multiply(a,a,scaleMatrix(b,c,d))}function translate(a,b,c,d){return multiply(a,a,translateMatrix(b,c,d))}function makeIdentityFrom(a){for(var b=createIdentityMatrix4(),c=0;c<b.length;c++)a[c]=b[c];return a}function createCompass(a,b,c,d,e,f){var g="compass-box",h="compass",i="compass_arrow",j="../src/img/kompas_bg2.png",k="../src/img/strelka.png",l=document.getElementById(g);if(!l)return w("DIV s ID: compass-box NEEXISTUJE!"),!1;var m=document.getElementsByTagName("canvas")[0];if(!m)return w("Neexistuje TAG <canvas>!"),!1;var n=a,o=b,p=(m.width-n)*c,q=(m.height-o)*d,r=document.getElementById(h);r||(r=document.createElement("div")),r.setAttribute("id",h),r.setAttribute("class","compass_bg"),r.style.width=n+"px",r.style.height=o+"px",r.style.left=p+"px",r.style.top=q+"px",r.style.backgroundImage="url("+j+")",r.style.opacity=.75,r.style.position="absolute",r.style.overflow="hidden",r.style.backgroundSize=n+"px "+o+"px",document.getElementById(h)||l.appendChild(r);var s=document.createElement("div");if(s.setAttribute("id",i),s.setAttribute("class","compass_arrow"),s.style.width=n+"px",s.style.height=o+"px",s.style.backgroundImage="url("+k+")",s.style.transform="rotate("+parseInt(e+f)+"deg)",s.style.webkitTransform="rotate("+parseInt(e+f)+"deg)",document.getElementById(i)){var t=document.getElementById(i);t.style.transform="rotate("+parseInt(e+f)+"deg)",t.style.webkitTransform="rotate("+parseInt(e+f)+"deg)",t.style.backgroundSize=n+"px "+o+"px"}else r.appendChild(s);return l}function fieldVisionCoord(a,b,c,d,e){var f=polarToCartesian(a,b,c,e),g=polarToCartesian(a,b,c,d),h=e-d>180?"1":"0",i=" ";return!(isNaN(f.x)||isNaN(f.y)||isNaN(c)||isNaN(g.x)||isNaN(g.y))&&["M"+i+f.x+i+f.y+i+"A"+i+c+i+c+i+0+i+h+i+0+i+g.x+i+g.y]}function createFieldVision(a,b,c,d,f,g){var h=document.getElementById("viewer"),i=document.getElementsByTagName("canvas")[0];if(!i)return e("Neexistuje TAG <canvas>!"),!1;var j=30,k=a+j/2,l=b+j/2,m=(i.width-k)*c,n=(i.height-l)*d;if(h){var o=document.getElementById("field_vision");if(!o)return e("DIV s ID: field_vision NEEXISTUJE!"),!1;o.style.width=k+"px",o.style.height=l+"px",o.style.left=m+"px",o.style.top=n+"px",o.style.backgroundColor="transparent",o.style.opacity=1,o.style.position="absolute",o.style.overflow="hidden",o.setAttribute("stroke","#093");var p=document.getElementById("svg_path");p.setAttribute("stroke-width",j),p.setAttribute("stroke","#069"),p.setAttribute("fill","none"),p.style.opacity=.7,p.style.backgroundColor="transparent";var q=Math.abs(parseInt(f)),r=(180-q)/2,s=parseInt(Math.abs(g)),t=0-s+r,u=180-s-r;if(isNaN(t)||isNaN(u))return!1;var v=parseInt(a/2),x=parseInt(b/2),y=.65,z=v>x?parseInt(b/2*y):parseInt(a/2*y);return p.setAttribute("d",fieldVisionCoord(v,x,z,t,u)),o}return w("DIV s ID: viewer NEEXISTUJE!"),!1}function createVideoStatusBar(a,b,c,d){var e="video_status_bar",g=(document.getElementById("viewer"),document.getElementById(e));if(!g)return w("ERROR: chybi div pro "+e),!1;var h=document.getElementsByTagName("canvas")[0];if(!h)return w("Neexistuje TAG <canvas>!"),!1;var i=document.getElementById(e+"_id");if(i||(i=document.createElement("div")),SETTINGS.mode.fisheye.panorama.active||SETTINGS.mode.equirectangular.panorama.active)return!1;var j=a,k=b,l=(h.width-j)*c,m=(h.height-k)*d;i.setAttribute("id",e+"_id"),i.style.width=j+"px",i.style.height=k+"px",i.style.left=l+"px",i.style.top=m+"px",i.style.backgroundColor="transparent",i.style.opacity=.35,i.style.position="absolute",i.style.overflow="hidden",i.style.marginRight="5px",i.style.margin="5px",document.getElementById(e+"_id")||g.appendChild(i);var n=document.getElementById("progress_bar");n||(n=document.createElement("progress")),n.setAttribute("id","progress_bar"),n.setAttribute("class","unique"),n.style.width="70%",n.style.height=k+"px",n.style.float="left",n.style.opacity=.5,document.getElementById("progress_bar")||i.appendChild(n);var o=document.getElementById("progress_bar_text");return o||(o=document.createElement("div")),o.setAttribute("id","progress_bar_text"),o.style.width="auto",o.style.height=k+"px",o.style.float="left",o.style.marginLeft="5%",document.getElementById("progress_bar_text")||i.appendChild(o),{text:o,box:n}}function createLoader(a,b,c,d,e,f){var g=document.getElementsByTagName("canvas")[0],h=document.getElementById("overlay");h?(h.style.width=g.width+"px",h.style.height=g.height+"px",e?h.style.display="block":setTimeout(function(){h.style.display="none"},f>0?f:0)):w("overlay not exists")}function createInfoScreen(a,b,c){if(!document.getElementById("viewer"))return e("DIV s ID: viewer NEEXISTUJE!"),!1;var f=document.getElementsByTagName("canvas")[0];if(!f)return e("Neexistuje TAG <canvas>!"),!1;var g=document.getElementById("info_screen");if(!g)return e("DIV s ID: info_screen NEEXISTUJE!"),!1;var h=b,i=c;info_screen_left=.5*(f.width-h),info_screen_top=.5*(f.height-i);var j=35;g.style.padding="10px",g.style.marginTop=(i-j)/2,g.style.marginBottom=(i-j)/2,g.style.width=h+"px",g.style.height="auto",g.style.left=info_screen_left+"px",g.style.top=info_screen_top+"px",g.style.backgroundColor="red",g.style.fontSize=j+"px",g.style.textAlign="center",g.style.position="absolute",g.style.overflow="hidden",g.innerHTML=a}function createVideoControlls(a,b,c,d){var f="video_controlls",g="video_controlls_btn_play",h="video_controlls_btn_slider_video",i="video_controlls_btn_slider_volume",j="video_controlls_btn_volume_on";if(!document.getElementById("viewer"))return e("DIV s ID: viewer NEEXISTUJE!"),!1;var l=document.getElementsByTagName("canvas")[0];if(!l)return e("Neexistuje TAG <canvas>!"),!1;var m=document.getElementById(f);if(!m)return e("DIV s ID: video_controlls NEEXISTUJE!"),!1;if(SETTINGS.mode.fisheye.panorama.active||SETTINGS.mode.equirectangular.panorama.active)return!1;var n=a,o=b;video_controlls_left=(l.width-n)*c,video_controlls_top=(l.height-o)*d,m.style.width=n+"px",m.style.height=o+"px",m.style.left=video_controlls_left+"px",m.style.top=video_controlls_top+"px",m.style.backgroundColor="transparent",m.style.opacity=.75,m.style.position="absolute",m.style.overflow="hidden";var p=document.getElementById(g);p||(p=document.createElement("button"),p.setAttribute("id","video_controlls_btn_play"),p.setAttribute("class","play_icon"),p.style.height="inherit",p.style.width="15%",p.style.float="left",p.style.backgroundColor="transparent",m.appendChild(p));var q=document.getElementById(h);q||(q=document.createElement("input"),q.setAttribute("id",h),q.setAttribute("type","range"),q.setAttribute("value","0"),q.style.height="inherit",q.style.width="25%",q.style.float="left",q.style.backgroundColor="transparent",m.appendChild(q));var r=document.getElementById(j);r||(r=document.createElement("button"),r.setAttribute("id",j),r.setAttribute("class","volume_on_icon"),r.style.height="inherit",r.style.width="50px",r.style.float="left",r.style.backgroundColor="transparent",m.appendChild(r));var s=document.getElementById(i);return s||(s=document.createElement("input"),s.setAttribute("id",i),s.setAttribute("type","range"),s.setAttribute("value","1"),s.setAttribute("min","0"),s.setAttribute("max","1"),s.setAttribute("step","0.01"),s.style.height="inherit",s.style.width="15%",s.style.float="left",s.style.backgroundColor="transparent",m.appendChild(s)),{controlls:m,btn:{play:document.getElementById(g),slider:document.getElementById(h),volume_slider:document.getElementById(i),volume:document.getElementById(j)}}}function createPanoramaControlls(a,b,c,d){var f="panorama_controlls",g="panorama_controlls_btn_fullstreen",h="panorama_controlls_btn_zoom_plus",i="panorama_controlls_btn_zoom_minus",j="panorama_controlls_btn_settings";if(!document.getElementById("viewer"))return e("DIV s ID: viewer NEEXISTUJE!"),!1;var l=document.getElementsByTagName("canvas")[0];if(!l)return e("Neexistuje TAG <canvas>!"),!1;var m=document.getElementById(f);if(!m)return e("DIV s ID: panorama_controlls NEEXISTUJE!"),!1;var n=a,o=b;panorama_controlls_left=(l.width-n)*c,panorama_controlls_top=(l.height-o)*d,m.style.width=n+"px",m.style.height=o+"px",m.style.left=panorama_controlls_left+"px",m.style.top=panorama_controlls_top+"px",m.style.backgroundColor="transparent",m.style.opacity=1,m.style.position="absolute",m.style.overflow="hidden";var i="panorama_controlls_btn_zoom_minus",p=document.getElementById(g);p||(p=document.createElement("div"),p.setAttribute("id",g),p.setAttribute("class","fullscreen_icon"),p.style.height="inherit",p.style.float="left",p.style.backgroundColor="transparent",m.appendChild(p));var q=document.getElementById(h);q||(q=document.createElement("div"),q.setAttribute("id",h),q.setAttribute("class","zoom_plus_icon"),q.style.height="inherit",q.style.float="left",q.style.backgroundColor="transparent",m.appendChild(q));var r=document.getElementById(i);r||(r=document.createElement("div"),r.setAttribute("id",i),r.setAttribute("class","zoom_minus_icon"),r.style.height="inherit",r.style.float="left",r.style.backgroundColor="transparent",m.appendChild(r));var s=document.getElementById(j);return s||(s=document.createElement("div"),s.setAttribute("id",j),s.setAttribute("class","settings_icon"),s.style.height="inherit",s.style.float="left",s.style.backgroundColor="transparent",m.appendChild(s)),{controlls:m,btn:{zoom_plus:document.getElementById(h),zoom_minus:document.getElementById(i),fullscreen:document.getElementById(g),settings:document.getElementById(j)}}}function createWindowSettings(a,b,c,d,f){var g=document.getElementById("viewer");if(!g)return e("DIV s ID: viewer NEEXISTUJE!"),!1;var h=document.getElementsByTagName("canvas")[0];if(!h)return e("Neexistuje TAG <canvas>!"),!1;var i=a,j=b;panorama_controlls_left=(h.width-i)*c,panorama_controlls_top=(h.height-j)*d;var k=document.getElementById("panorama_controlls_window_settings");k||(k=document.createElement("div"),k.setAttribute("id","panorama_controlls_window_settings"),g.appendChild(k)),k.style.width=i+"px",k.style.height=j+"px",k.style.left=panorama_controlls_left+"px",k.style.top=panorama_controlls_top+"px",k.style.backgroundColor="rgba(0,0,0,0.2)",k.style.position="absolute",k.style.overflow="hidden";var l=document.getElementById("panorama_controlls_window_settings_btn_subtit");l||(l=document.createElement("div"),l.setAttribute("id","panorama_controlls_window_settings_btn_subtit"),k.appendChild(l)),l.style.width=i+"px",l.setAttribute("class","window_settings_btn_inactive"),l.innerHTML="Subtitles On/Off";var m=document.getElementById("panorama_controlls_window_settings_btn_mode_equi_vid");m||(m=document.createElement("a"),m.setAttribute("href","?equiVM=true"),m.setAttribute("id","panorama_controlls_window_settings_btn_mode_equi_vid"),k.appendChild(m)),m.style.width=i+"px",m.setAttribute("class","window_settings_btn_mode"),m.innerHTML="Equi video mode";var n=document.getElementById("panorama_controlls_window_settings_btn_mode_fish_vid");n||(n=document.createElement("a"),n.setAttribute("href","?fishVM=true"),n.setAttribute("id","panorama_controlls_window_settings_btn_mode_fish_vid"),k.appendChild(n)),n.style.width=i+"px",n.setAttribute("class","window_settings_btn_mode"),n.innerHTML="Fish video mode";var o=document.getElementById("panorama_controlls_window_settings_btn_mode_equi_pan");o||(o=document.createElement("a"),o.setAttribute("href","?equiPM=true"),o.setAttribute("id","panorama_controlls_window_settings_btn_mode_equi_pan"),k.appendChild(o)),o.style.width=i+"px",o.setAttribute("class","window_settings_btn_mode"),o.innerHTML="Equi pano mode";var p=document.getElementById("panorama_controlls_window_settings_btn_mode_fish_pan");return p||(p=document.createElement("a"),p.setAttribute("href","?fishPM=true"),p.setAttribute("id","panorama_controlls_window_settings_btn_mode_fish_pan"),k.appendChild(p)),p.style.width=i+"px",p.setAttribute("class","window_settings_btn_mode"),p.innerHTML="Fish pano mode",k.style.display=f?"block":"none",{settings:k,btn:{subtit:l,mode_equi_vid:m,mode_fish_vid:n,mode_equi_pan:o,mode_fish_pan:p}}}function createSubtitlesBox(a,b,c,d,f,g){var h=document.getElementById("viewer");if(!h)return e("DIV s ID: viewer NEEXISTUJE!"),!1;var i=document.getElementsByTagName("canvas")[0];if(!i)return e("Neexistuje TAG <canvas>!"),!1;var j=10,k=a-j,l=b-j;panorama_controlls_left=(i.width-k)*c,panorama_controlls_top=(i.height-l)*d;var m=document.getElementById("subtitles_box");return m||(m=document.createElement("div"),m.setAttribute("id","subtitles_box"),h.appendChild(m)),m.style.width=k+"px",m.style.height="auto",m.style.padding=j+"px",m.style.left=panorama_controlls_left+"px",m.style.top=panorama_controlls_top+"px",m.style.backgroundColor="rgba(0,0,0,0.6)",m.style.color="white",m.style.textAlign="center",m.style.position="absolute",m.style.overflow="hidden",m.innerHTML=g,m.style.display=f?"block":"none",m}